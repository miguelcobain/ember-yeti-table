{"version":3,"file":"create-regex.js","sources":["../../src/utils/create-regex.js"],"sourcesContent":["import { isBlank } from '@ember/utils';\n\nconst ESCAPE_REGEX = new RegExp(\n  '(\\\\' + ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\\\', '$', '^', '-'].join('|\\\\') + ')',\n  'g'\n);\n\nfunction escapeRegex(val) {\n  return val.replace(ESCAPE_REGEX, '\\\\$1');\n}\n\nexport default function createRegex(search, regex = false, smart = true, caseInsensitive = true) {\n  if (isBlank(search)) {\n    return;\n  }\n\n  search = regex ? search : escapeRegex(search);\n\n  if (smart) {\n    /* For smart filtering we want to allow the search to work regardless of\n     * word order. We also want double quoted text to be preserved, so word\n     * order is important - a la google. So this is what we want to\n     * generate:\n     *\n     * ^(?=.*?\\bone\\b)(?=.*?\\btwo three\\b)(?=.*?\\bfour\\b).*$\n     */\n    let words = search.match(/\"[^\"]+\"|[^ ]+/g) || [''];\n    let a = words.map(word => {\n      if (word.charAt(0) === '\"') {\n        let m = word.match(/^\"(.*)\"$/);\n        word = m ? m[1] : word;\n      }\n\n      return word.replace('\"', '');\n    });\n\n    search = `^(?=.*?${a.join(')(?=.*?')}).*$`;\n  }\n\n  return new RegExp(search, caseInsensitive ? 'i' : '');\n}\n"],"names":["ESCAPE_REGEX","RegExp","join","escapeRegex","val","replace","createRegex","search","regex","smart","caseInsensitive","isBlank","words","match","a","map","word","charAt","m"],"mappings":";;AAEA,MAAMA,YAAY,GAAG,IAAIC,MAAM,CAC7B,KAAK,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAACC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,EAC3G,GACF,CAAC;AAED,SAASC,WAAWA,CAACC,GAAG,EAAE;AACxB,EAAA,OAAOA,GAAG,CAACC,OAAO,CAACL,YAAY,EAAE,MAAM,CAAC;AAC1C;AAEe,SAASM,WAAWA,CAACC,MAAM,EAAEC,KAAK,GAAG,KAAK,EAAEC,KAAK,GAAG,IAAI,EAAEC,eAAe,GAAG,IAAI,EAAE;AAC/F,EAAA,IAAIC,OAAO,CAACJ,MAAM,CAAC,EAAE;AACnB,IAAA;AACF;EAEAA,MAAM,GAAGC,KAAK,GAAGD,MAAM,GAAGJ,WAAW,CAACI,MAAM,CAAC;AAE7C,EAAA,IAAIE,KAAK,EAAE;AACT;AACJ;AACA;AACA;AACA;AACA;AACA;IACI,IAAIG,KAAK,GAAGL,MAAM,CAACM,KAAK,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC;AAClD,IAAA,IAAIC,CAAC,GAAGF,KAAK,CAACG,GAAG,CAACC,IAAI,IAAI;MACxB,IAAIA,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AAC1B,QAAA,IAAIC,CAAC,GAAGF,IAAI,CAACH,KAAK,CAAC,UAAU,CAAC;QAC9BG,IAAI,GAAGE,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAC,GAAGF,IAAI;AACxB;AAEA,MAAA,OAAOA,IAAI,CAACX,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;AAC9B,KAAC,CAAC;IAEFE,MAAM,GAAG,UAAUO,CAAC,CAACZ,IAAI,CAAC,SAAS,CAAC,CAAM,IAAA,CAAA;AAC5C;EAEA,OAAO,IAAID,MAAM,CAACM,MAAM,EAAEG,eAAe,GAAG,GAAG,GAAG,EAAE,CAAC;AACvD;;;;"}